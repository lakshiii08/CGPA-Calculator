<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéì CGPA forge ¬∑ dark mode ¬∑ sem1 & sem2 marks</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Plus Jakarta Sans', 'Inter', system-ui, -apple-system, sans-serif;
        }

        body {
            background: radial-gradient(circle at 10% 20%, #1b2d3a, #0a1720);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1.5rem;
        }

        /* main card ‚Äì sleek dark glass */
        .cgpa-vault {
            max-width: 1400px;
            width: 100%;
            background: rgba(18, 30, 38, 0.8);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-radius: 3.5rem;
            padding: 2.5rem 2.8rem;
            box-shadow: 0 40px 70px -15px #030c14, 0 0 0 1px rgba(90, 175, 230, 0.15) inset, 0 0 0 2px rgba(255,255,255,0.02);
            border: 1px solid rgba(70, 150, 200, 0.2);
        }

        /* header area */
        .top-bar {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 2.2rem;
        }

        .title-glow {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .title-glow h1 {
            font-size: 2.5rem;
            font-weight: 700;
            background: linear-gradient(120deg, #c1e4ff, #96d0ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -0.02em;
        }

        .badge-dark {
            background: #1e4055;
            color: #c1e4ff;
            padding: 0.4rem 1.6rem;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            border: 1px solid #307090;
            box-shadow: 0 0 12px #1f5780;
        }

        .marks-chip {
            background: #0f2a38;
            border-radius: 60px;
            padding: 0.7rem 2rem;
            border: 1px solid #3c7494;
            color: #b2defa;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
            box-shadow: 0 8px 18px -6px #030f16;
        }

        .marks-chip i { font-style: normal; font-size: 1.5rem; filter: drop-shadow(0 0 5px #57b5ff); }

        /* tabs ‚Äì minimal but attractive */
        .tab-panel {
            display: flex;
            gap: 2rem;
            margin: 1rem 0 2.5rem 0;
            border-bottom: 2px solid #254a60;
            padding-bottom: 0.2rem;
        }

        .tab-button {
            background: transparent;
            border: none;
            padding: 0.8rem 2.8rem 0.8rem 2.8rem;
            font-size: 1.7rem;
            font-weight: 600;
            color: #9cbdd5;
            cursor: pointer;
            transition: 0.25s;
            border-radius: 60px 60px 0 0;
            position: relative;
            letter-spacing: -0.3px;
        }

        .tab-button::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 4px;
            background: #2d8fc0;
            border-radius: 4px 4px 0 0;
            opacity: 0;
            transition: 0.2s;
        }

        .tab-button.active {
            color: white;
            text-shadow: 0 0 8px #7bc4ff;
        }

        .tab-button.active::after {
            opacity: 1;
            box-shadow: 0 0 15px #2d9eff;
        }

        .tab-button:not(.active):hover {
            color: #d2ecff;
            background: rgba(45, 110, 150, 0.15);
        }

        /* panels */
        .sem-panel {
            display: none;
            animation: fadeSlide 0.3s ease;
        }

        .sem-panel.active-panel {
            display: block;
        }

        @keyframes fadeSlide {
            0% { opacity: 0.2; transform: translateY(6px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* subject table header ‚Äì dark but readable */
        .grid-header {
            display: grid;
            grid-template-columns: 3fr 0.9fr 1.8fr 1.6fr 0.6fr;
            gap: 1rem;
            background: #112c3b;
            padding: 1rem 2rem;
            border-radius: 60px;
            margin: 0 0 1.2rem 0;
            font-weight: 600;
            color: #b2d9f5;
            border: 1px solid #295e7c;
            backdrop-filter: blur(4px);
            box-shadow: 0 6px 14px #0a1c27;
            font-size: 1rem;
        }

        /* rows ‚Äì dark glassy */
        .subject-row {
            display: grid;
            grid-template-columns: 3fr 0.9fr 1.8fr 1.6fr 0.6fr;
            gap: 1rem;
            align-items: center;
            background: rgba(15, 40, 52, 0.7);
            padding: 0.7rem 2rem;
            border-radius: 60px;
            margin-bottom: 0.9rem;
            border: 1px solid #2a5b78;
            transition: 0.2s;
            box-shadow: 0 8px 16px -8px #06131c;
            backdrop-filter: blur(4px);
        }

        .subject-row:hover {
            border-color: #4b93c0;
            background: rgba(20, 55, 72, 0.8);
            box-shadow: 0 0 18px #1f628b;
        }

        .subj-name {
            font-weight: 550;
            color: #d3ecff;
            font-size: 1.05rem;
            text-shadow: 0 2px 3px #030f17;
        }

        .credit-chip {
            background: #163d51;
            border-radius: 40px;
            padding: 0.5rem 1rem;
            text-align: center;
            font-weight: 600;
            color: #b3defa;
            border: 1px solid #327197;
            width: fit-content;
            min-width: 70px;
            box-shadow: inset 0 1px 4px #1c475e;
        }

        .marks-input {
            width: 100%;
            padding: 0.75rem 1rem;
            background: #0d2736;
            border: 2px solid #234f6b;
            border-radius: 60px;
            font-size: 1rem;
            color: #f0f9ff;
            transition: 0.2s;
            text-align: center;
        }

        .marks-input:focus {
            border-color: #3da6ff;
            outline: none;
            box-shadow: 0 0 0 4px rgba(0,150,255,0.3);
            background: #0f3142;
        }

        .grade-badge {
            background: #0f3144;
            border-radius: 60px;
            padding: 0.6rem 1rem;
            text-align: center;
            font-weight: 600;
            color: #a5dcff;
            border: 1px solid #3d7ca3;
            font-size: 1rem;
            backdrop-filter: blur(4px);
        }

        .delete-cell {
            display: flex;
            justify-content: center;
        }

        .delete-btn {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: #6f9fbf;
            transition: 0.1s;
            line-height: 1;
            filter: drop-shadow(0 0 4px #101c26);
        }

        .delete-btn:hover {
            color: #ff7070;
            transform: scale(1.2);
            text-shadow: 0 0 12px #ff5e5e;
        }

        /* action buttons */
        .action-strip {
            display: flex;
            gap: 1.4rem;
            margin: 2.5rem 0 2rem;
            flex-wrap: wrap;
        }

        .btn {
            background: rgba(16, 44, 60, 0.8);
            border: 2px solid #2c6c90;
            padding: 0.8rem 2.5rem;
            border-radius: 60px;
            font-weight: 600;
            color: #ceecff;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.2s;
            backdrop-filter: blur(8px);
            box-shadow: 0 10px 18px -10px #030d13;
        }

        .btn-primary {
            background: #166a97;
            border-color: #5bb0e6;
            color: white;
            box-shadow: 0 0 20px #1173b0;
        }

        .btn-primary:hover {
            background: #1d82b5;
            border-color: #93d0ff;
            box-shadow: 0 0 28px #1f95d6;
            transform: scale(1.02);
        }

        .btn:hover {
            background: #1d4c68;
            border-color: #4794c9;
            color: white;
        }

        /* result footer ‚Äì glowing dark */
        .result-footer {
            background: rgba(10, 28, 40, 0.9);
            backdrop-filter: blur(16px);
            border-radius: 70px;
            padding: 2.2rem 3rem;
            margin-top: 2.5rem;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            border: 1px solid #2e7199;
            box-shadow: 0 20px 30px -10px #030f1a, 0 0 30px #104b70;
        }

        .cgpa-box {
            display: flex;
            align-items: baseline;
            gap: 0.8rem;
        }

        .cgpa-number {
            font-size: 5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #b3e2ff, #69ccff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            filter: drop-shadow(0 0 20px #197bbd);
        }

        .cgpa-ten {
            font-size: 1.6rem;
            color: #99c9f0;
        }

        .stats-box {
            display: flex;
            gap: 3rem;
            flex-wrap: wrap;
        }

        .stat {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 2.4rem;
            font-weight: 600;
            color: #c2e3ff;
        }

        .stat-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            color: #87bad4;
            letter-spacing: 1px;
        }

        .footnote {
            margin-top: 1.8rem;
            display: flex;
            justify-content: space-between;
            color: #79b1cf;
            align-items: center;
        }

        .marks-note {
            background: #11384f;
            color: #bee2ff;
            padding: 0.4rem 2rem;
            border-radius: 60px;
            border: 1px solid #2a78a3;
        }

        /* custom scroll for dark */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #1d3f53; border-radius: 20px; }
        ::-webkit-scrollbar-thumb { background: #3e799b; border-radius: 20px; }
    </style>
</head>
<body>
<div class="cgpa-vault">
    <!-- header -->
    <div class="top-bar">
        <div class="title-glow">
            <h1>üéì CGPA ¬∑ DARK MODE</h1>
            <span class="badge-dark">/10 scale</span>
        </div>
        <div class="marks-chip">
            <i>üìä</i> ENTER MARKS (0‚Äì100)
        </div>
    </div>

    <!-- tabs with clean headings (only 1st sem / 2nd sem) -->
    <div class="tab-panel">
        <button class="tab-button active" id="tabFirst">1À¢·µó SEMESTER</button>
        <button class="tab-button" id="tabSecond">2‚Åø·µà SEMESTER</button>
    </div>

    <!-- semester 1 panel (subjects including CTP lab 1cr, CAEG 1.5cr) -->
    <div id="sem1Panel" class="sem-panel active-panel">
        <div class="grid-header">
            <span>üìö SUBJECT (SEM 1)</span>
            <span>CR</span>
            <span>MARKS (0‚Äì100)</span>
            <span>GRADE/10</span>
            <span style="text-align:center;">‚öôÔ∏è</span>
        </div>
        <div id="sem1RowsContainer"></div>
        <div class="action-strip">
            <button class="btn btn-primary" id="addCustom1">‚ûï ADD CUSTOM</button>
            <button class="btn" id="resetMarks1">‚ü≤ RESET MARKS</button>
        </div>
    </div>

    <!-- semester 2 panel (subjects including OOP lab 1cr, CAMD 1.5cr) -->
    <div id="sem2Panel" class="sem-panel">
        <div class="grid-header">
            <span>üìö SUBJECT (SEM 2)</span>
            <span>CR</span>
            <span>MARKS (0‚Äì100)</span>
            <span>GRADE/10</span>
            <span style="text-align:center;">‚öôÔ∏è</span>
        </div>
        <div id="sem2RowsContainer"></div>
        <div class="action-strip">
            <button class="btn btn-primary" id="addCustom2">‚ûï ADD CUSTOM</button>
            <button class="btn" id="resetMarks2">‚ü≤ RESET MARKS</button>
        </div>
    </div>

    <!-- combined CGPA result -->
    <div class="result-footer">
        <div class="cgpa-box">
            <span class="cgpa-number" id="cgpaDisplay">0.00</span>
            <span class="cgpa-ten">/10</span>
        </div>
        <div class="stats-box">
            <div class="stat">
                <span class="stat-value" id="totalCreditsDisplay">0</span>
                <span class="stat-label">TOTAL CREDITS</span>
            </div>
            <div class="stat">
                <span class="stat-value" id="weightedSumDisplay">0.00</span>
                <span class="stat-label">WEIGHTED SUM</span>
            </div>
        </div>
    </div>

    <div class="footnote">
        <span>‚ö° marks ‚Üí grade = marks/10  (e.g., 82 ‚Üí 8.2) ¬∑ audit 0cr ignored</span>
        <span class="marks-note">üîπ Œ£(grade√ócredit) / Œ£ credits</span>
    </div>
</div>

<script>
    (function() {
        // ----- fixed subjects sem1 (with CTP lab 1cr, CAEG 1.5cr) -----
        const sem1Fixed = [
            { name: "Maths 1", credits: 4 },
            { name: "Physics / Chemistry", credits: 4 },
            { name: "Computational Thinking & Programming", credits: 2 },
            { name: "Basic Electrical / Mechanical / Civil Engg.", credits: 2 },
            { name: "Audit (0 cr)", credits: 0 },
            { name: "Communication Skills / Human Values", credits: 2 },
            { name: "BEEE Lab / Mechanical Workshop", credits: 1 },
            { name: "COS Lab / HV Lab", credits: 1 },
            { name: "Physics Lab / Chem Lab", credits: 1 },
            { name: "Foundation Course", credits: 0.5 },
            { name: "CTP Lab", credits: 1 },
            { name: "CAEG", credits: 1.5 }
        ];

        // ----- fixed subjects sem2 (with OOP lab 1cr, CAMD 1.5cr) -----
        const sem2Fixed = [
            { name: "Maths 2", credits: 4 },
            { name: "Physics / Chemistry", credits: 4 },
            { name: "Problem Solving using OOP", credits: 2 },
            { name: "Basic Electrical / Mechanical / Civil Engg.", credits: 2 },
            { name: "Audit (0 cr)", credits: 0 },
            { name: "Communication Skills / Human Values", credits: 2 },
            { name: "BEEE Lab / Mechanical Workshop", credits: 1 },
            { name: "COS Lab / HV Lab", credits: 1 },
            { name: "Physics Lab / Chem Lab", credits: 1 },
            { name: "Foundation Course", credits: 0.5 },
            { name: "OOP Lab", credits: 1 },
            { name: "CAMD", credits: 1.5 }
        ];

        const containerSem1 = document.getElementById('sem1RowsContainer');
        const containerSem2 = document.getElementById('sem2RowsContainer');

        function marksToGrade(marks) {
            let m = parseFloat(marks);
            if (isNaN(m) || m < 0) return '';
            m = Math.min(100, Math.max(0, m));
            return (m / 10).toFixed(2);
        }

        function updateGradeDisplay(marksInput, gradeSpan) {
            const marks = marksInput.value;
            gradeSpan.innerText = marksToGrade(marks) || '‚Äî';
        }

        // create fixed row (non-editable credits)
        function createFixedRow(subjectName, creditValue, savedMarks = '') {
            const row = document.createElement('div');
            row.className = 'subject-row';

            const nameDiv = document.createElement('div');
            nameDiv.className = 'subj-name';
            nameDiv.innerText = subjectName;

            const creditDiv = document.createElement('div');
            creditDiv.className = 'credit-chip';
            creditDiv.innerText = creditValue + (creditValue === 0 ? ' (audit)' : '');

            const marksInput = document.createElement('input');
            marksInput.type = 'number';
            marksInput.placeholder = '0‚Äì100';
            marksInput.step = 'any';
            marksInput.min = '0';
            marksInput.max = '100';
            marksInput.value = savedMarks;
            marksInput.classList.add('marks-input');

            const gradeSpan = document.createElement('span');
            gradeSpan.className = 'grade-badge';
            gradeSpan.innerText = savedMarks ? marksToGrade(savedMarks) : '‚Äî';

            const delCell = document.createElement('div');
            delCell.className = 'delete-cell';
            const delBtn = document.createElement('button');
            delBtn.className = 'delete-btn';
            delBtn.innerHTML = '‚úï';
            delBtn.setAttribute('aria-label', 'remove');
            delBtn.onclick = function() { row.remove(); updateCombinedCGPA(); };
            delCell.appendChild(delBtn);

            row.appendChild(nameDiv);
            row.appendChild(creditDiv);
            row.appendChild(marksInput);
            row.appendChild(gradeSpan);
            row.appendChild(delCell);

            marksInput.addEventListener('input', function() {
                updateGradeDisplay(marksInput, gradeSpan);
                updateCombinedCGPA();
            });

            return row;
        }

        // custom row (editable name + credits)
        function createCustomRow(defaultName = '‚úèÔ∏è custom', defaultCredits = 2, savedMarks = '') {
            const row = document.createElement('div');
            row.className = 'subject-row';

            const nameInput = document.createElement('input');
            nameInput.type = 'text';
            nameInput.value = defaultName;
            nameInput.placeholder = 'subject';
            nameInput.style.background = '#1b3a4b';
            nameInput.style.border = '1px solid #2b6c90';
            nameInput.style.borderRadius = '60px';
            nameInput.style.padding = '0.6rem 1rem';
            nameInput.style.fontSize = '0.95rem';
            nameInput.style.width = '100%';
            nameInput.style.color = '#e8f3ff';

            const creditInput = document.createElement('input');
            creditInput.type = 'number';
            creditInput.value = defaultCredits;
            creditInput.step = 'any';
            creditInput.min = '0';
            creditInput.style.width = '100%';
            creditInput.style.padding = '0.6rem 0.8rem';
            creditInput.style.borderRadius = '60px';
            creditInput.style.border = '1px solid #2b6c90';
            creditInput.style.textAlign = 'center';
            creditInput.style.background = '#1b3a4b';
            creditInput.style.color = 'white';
            creditInput.classList.add('credit-custom');

            const marksInput = document.createElement('input');
            marksInput.type = 'number';
            marksInput.placeholder = 'marks 0‚Äì100';
            marksInput.step = 'any';
            marksInput.min = '0';
            marksInput.max = '100';
            marksInput.value = savedMarks;
            marksInput.classList.add('marks-input');

            const gradeSpan = document.createElement('span');
            gradeSpan.className = 'grade-badge';
            gradeSpan.innerText = savedMarks ? marksToGrade(savedMarks) : '‚Äî';

            const delCell = document.createElement('div');
            delCell.className = 'delete-cell';
            const delBtn = document.createElement('button');
            delBtn.className = 'delete-btn';
            delBtn.innerHTML = '‚úï';
            delBtn.onclick = function() { row.remove(); updateCombinedCGPA(); };
            delCell.appendChild(delBtn);

            row.appendChild(nameInput);
            row.appendChild(creditInput);
            row.appendChild(marksInput);
            row.appendChild(gradeSpan);
            row.appendChild(delCell);

            marksInput.addEventListener('input', function() {
                updateGradeDisplay(marksInput, gradeSpan);
                updateCombinedCGPA();
            });
            creditInput.addEventListener('input', updateCombinedCGPA);

            return row;
        }

        function initSemester(container, subjectList) {
            container.innerHTML = '';
            subjectList.forEach(sub => {
                const row = createFixedRow(sub.name, sub.credits, '');
                container.appendChild(row);
            });
        }

        function resetMarksInContainer(container) {
            const marksInputs = container.querySelectorAll('.marks-input');
            marksInputs.forEach(inp => inp.value = '');
            const rows = container.querySelectorAll('.subject-row');
            rows.forEach(row => {
                const marksInp = row.querySelector('.marks-input');
                const gradeSpan = row.querySelector('.grade-badge');
                if (marksInp && gradeSpan) updateGradeDisplay(marksInp, gradeSpan);
            });
            updateCombinedCGPA();
        }

        function updateCombinedCGPA() {
            let totalCredits = 0, totalWeighted = 0;
            function process(container) {
                const rows = container.querySelectorAll('.subject-row');
                rows.forEach(row => {
                    const creditChip = row.querySelector('.credit-chip');
                    const creditCustom = row.querySelector('.credit-custom');
                    const marksInput = row.querySelector('.marks-input');
                    if (!marksInput) return;

                    let credits = 0;
                    if (creditCustom) {
                        credits = parseFloat(creditCustom.value) || 0;
                    } else if (creditChip) {
                        const match = creditChip.innerText.match(/[\d.]+/);
                        credits = match ? parseFloat(match[0]) : 0;
                    }

                    const marks = parseFloat(marksInput.value);
                    if (!isNaN(marks) && marks >= 0 && credits > 0) {
                        totalWeighted += credits * (marks / 10);
                        totalCredits += credits;
                    }
                });
            }
            process(containerSem1);
            process(containerSem2);
            const cgpa = totalCredits > 0 ? totalWeighted / totalCredits : 0;
            document.getElementById('cgpaDisplay').innerText = cgpa.toFixed(3);
            document.getElementById('totalCreditsDisplay').innerText = totalCredits;
            document.getElementById('weightedSumDisplay').innerText = totalWeighted.toFixed(2);
        }

        // init
        initSemester(containerSem1, sem1Fixed);
        initSemester(containerSem2, sem2Fixed);

        // tabs
        const tab1 = document.getElementById('tabFirst');
        const tab2 = document.getElementById('tabSecond');
        const panel1 = document.getElementById('sem1Panel');
        const panel2 = document.getElementById('sem2Panel');

        tab1.addEventListener('click', () => {
            tab1.classList.add('active');
            tab2.classList.remove('active');
            panel1.classList.add('active-panel');
            panel2.classList.remove('active-panel');
        });

        tab2.addEventListener('click', () => {
            tab2.classList.add('active');
            tab1.classList.remove('active');
            panel2.classList.add('active-panel');
            panel1.classList.remove('active-panel');
        });

        // custom add
        document.getElementById('addCustom1').addEventListener('click', () => {
            containerSem1.appendChild(createCustomRow('üìå custom', 2, ''));
            updateCombinedCGPA();
        });
        document.getElementById('addCustom2').addEventListener('click', () => {
            containerSem2.appendChild(createCustomRow('üìå custom', 2, ''));
            updateCombinedCGPA();
        });

        // reset
        document.getElementById('resetMarks1').addEventListener('click', () => resetMarksInContainer(containerSem1));
        document.getElementById('resetMarks2').addEventListener('click', () => resetMarksInContainer(containerSem2));

        updateCombinedCGPA();
    })();
</script>
</body>
</html>